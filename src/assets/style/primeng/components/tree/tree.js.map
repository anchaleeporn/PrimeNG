{"version":3,"file":"tree.js","sourceRoot":"","sources":["tree.ts"],"names":[],"mappings":"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","sourcesContent":["import {NgModule,Component,Input,AfterContentInit,Output,EventEmitter,OnInit,ViewContainerRef,ContentChildren,QueryList,TemplateRef,Inject,forwardRef,Host} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {TreeNode} from '../common/api';\nimport {SharedModule} from '../common/shared';\nimport {PrimeTemplate} from '../common/shared';\n\n@Component({\n    selector: 'p-treeNodeTemplateLoader',\n    template: ``\n})\nexport class TreeNodeTemplateLoader implements OnInit {\n        \n    @Input() node: any;\n    \n    @Input() template: TemplateRef<any>;\n        \n    constructor(public viewContainer: ViewContainerRef) {}\n    \n    ngOnInit() {\n        let view = this.viewContainer.createEmbeddedView(this.template, {\n            '\\$implicit': this.node\n        });\n    }\n}\n\n@Component({\n    selector: 'p-treeNode',\n    template: `\n        <template [ngIf]=\"node\">\n            <li class=\"ui-treenode\" *ngIf=\"!tree.horizontal\">\n                <div class=\"ui-treenode-content\"\n                    (mouseenter)=\"hover=true\" (mouseleave)=\"hover=false\" (click)=\"onNodeClick($event)\" (contextmenu)=\"onNodeRightClick($event)\">\n                    <span class=\"ui-tree-toggler fa fa-fw\" [ngClass]=\"{'fa-caret-right':!node.expanded,'fa-caret-down':node.expanded}\" *ngIf=\"!isLeaf()\"\n                            (click)=\"toggle($event)\"></span\n                    ><span class=\"ui-treenode-leaf-icon\" *ngIf=\"isLeaf()\"></span\n                    ><span [class]=\"getIcon()\" *ngIf=\"node.icon||node.expandedIcon||node.collapsedIcon\"></span\n                    ><span class=\"ui-treenode-label ui-corner-all\" \n                        [ngClass]=\"{'ui-state-hover':hover && tree.selectionMode,'ui-state-highlight':isSelected()}\">\n                            <span *ngIf=\"!tree.getTemplateForNode(node)\">{{node.label}}</span>\n                            <span *ngIf=\"tree.getTemplateForNode(node)\">\n                                <p-treeNodeTemplateLoader [node]=\"node\" [template]=\"tree.getTemplateForNode(node)\"></p-treeNodeTemplateLoader>\n                            </span>\n                    </span>\n                </div>\n                <ul class=\"ui-treenode-children\" style=\"display: none;\" *ngIf=\"node.children && node.expanded\" [style.display]=\"node.expanded ? 'block' : 'none'\">\n                    <p-treeNode *ngFor=\"let childNode of node.children\" [node]=\"childNode\"></p-treeNode>\n                </ul>\n            </li>\n            <table *ngIf=\"tree.horizontal\">\n                <tbody>\n                    <tr>\n                        <td class=\"ui-treenode-connector\" *ngIf=\"!root\">\n                            <table class=\"ui-treenode-connector-table\">\n                                <tbody>\n                                    <tr>\n                                        <td [ngClass]=\"{'ui-treenode-connector-line':!firstChild}\"></td>\n                                    </tr>\n                                    <tr>\n                                        <td [ngClass]=\"{'ui-treenode-connector-line':!lastChild}\"></td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                        </td>\n                        <td class=\"ui-treenode\" [ngClass]=\"{'ui-treenode-collapsed':!node.expanded}\">\n                            <div class=\"ui-treenode-content ui-state-default ui-corner-all\" \n                                [ngClass]=\"{'ui-state-hover':hover && tree.selectionMode,'ui-state-highlight':isSelected()}\"\n                                (mouseenter)=\"hover=true\" (mouseleave)=\"hover=false\" (click)=\"onNodeClick($event)\" (contextmenu)=\"onNodeRightClick($event)\">\n                                <span class=\"ui-tree-toggler fa fa-fw\" [ngClass]=\"{'fa-plus':!node.expanded,'fa-minus':node.expanded}\" *ngIf=\"!isLeaf()\"\n                                        (click)=\"toggle($event)\"></span\n                                ><span [class]=\"getIcon()\" *ngIf=\"node.icon||node.expandedIcon||node.collapsedIcon\"></span\n                                ><span class=\"ui-treenode-label ui-corner-all\">\n                                        <span *ngIf=\"!tree.getTemplateForNode(node)\">{{node.label}}</span>\n                                        <span *ngIf=\"tree.getTemplateForNode(node)\">\n                                            <p-treeNodeTemplateLoader [node]=\"node\" [template]=\"tree.getTemplateForNode(node)\"></p-treeNodeTemplateLoader>\n                                        </span>\n                                </span>\n                            </div>\n                        </td>\n                        <td class=\"ui-treenode-children-container\" *ngIf=\"node.children && node.expanded\" [style.display]=\"node.expanded ? 'table-cell' : 'none'\">\n                            <div class=\"ui-treenode-children\">\n                                <p-treeNode *ngFor=\"let childNode of node.children;let firstChild=first;let lastChild=last;\" [node]=\"childNode\" \n                                        [firstChild]=\"firstChild\" [lastChild]=\"lastChild\"></p-treeNode>\n                            </div>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </template>\n    `\n})\nexport class UITreeNode {\n\n    static ICON_CLASS: string = 'ui-treenode-icon fa fa-fw';\n\n    @Input() node: TreeNode;\n    \n    @Input() root: boolean;\n    \n    @Input() firstChild: boolean;\n    \n    @Input() lastChild: boolean;\n        \n    hover: boolean = false;\n        \n    constructor(@Inject(forwardRef(() => Tree)) public tree:Tree) {}\n        \n    getIcon() {\n        let icon: string;\n        \n        if(this.node.icon)\n            icon = this.node.icon;\n        else\n            icon = this.node.expanded ? this.node.expandedIcon : this.node.collapsedIcon;\n        \n        return UITreeNode.ICON_CLASS + ' ' + icon;\n    }\n    \n    isLeaf() {\n        return this.node.leaf == false ? false : !(this.node.children&&this.node.children.length);\n    }\n    \n    toggle(event: Event) {\n        if(this.node.expanded)\n            this.tree.onNodeCollapse.emit({originalEvent: event, node: this.node});\n        else\n            this.tree.onNodeExpand.emit({originalEvent: event, node: this.node});\n\n        this.node.expanded = !this.node.expanded\n    }\n    \n    onNodeClick(event: MouseEvent) {\n        this.tree.onNodeClick(event, this.node);\n    }\n    \n    onNodeRightClick(event: MouseEvent) {\n        this.tree.onNodeRightClick(event, this.node);\n    }\n    \n    isSelected() {\n        return this.tree.isSelected(this.node);\n    }\n}\n\n@Component({\n    selector: 'p-tree',\n    template: `\n        <div [ngClass]=\"{'ui-tree ui-widget ui-widget-content ui-corner-all':true,'ui-tree-selectable':selectionMode}\" [ngStyle]=\"style\" [class]=\"styleClass\" *ngIf=\"!horizontal\">\n            <ul class=\"ui-tree-container\">\n                <p-treeNode *ngFor=\"let node of value\" [node]=\"node\"></p-treeNode>\n            </ul>\n        </div>\n        <div [ngClass]=\"{'ui-tree ui-tree-horizontal ui-widget ui-widget-content ui-corner-all':true,'ui-tree-selectable':selectionMode}\"  [ngStyle]=\"style\" [class]=\"styleClass\" *ngIf=\"horizontal\">\n            <table *ngIf=\"value&&value[0]\">\n                <p-treeNode [node]=\"value[0]\" [root]=\"true\"></p-treeNode>\n            </table>\n        </div>\n    `\n})\nexport class Tree implements AfterContentInit {\n\n    @Input() value: TreeNode[];\n        \n    @Input() selectionMode: string;\n    \n    @Input() selection: any;\n    \n    @Output() selectionChange: EventEmitter<any> = new EventEmitter();\n    \n    @Output() onNodeSelect: EventEmitter<any> = new EventEmitter();\n    \n    @Output() onNodeUnselect: EventEmitter<any> = new EventEmitter();\n    \n    @Output() onNodeExpand: EventEmitter<any> = new EventEmitter();\n    \n    @Output() onNodeCollapse: EventEmitter<any> = new EventEmitter();\n    \n    @Output() onNodeContextMenuSelect: EventEmitter<any> = new EventEmitter();\n    \n    @Input() style: any;\n        \n    @Input() styleClass: string;\n    \n    @Input() contextMenu: any;\n    \n    @Input() layout: string = 'vertical';\n    \n    @ContentChildren(PrimeTemplate) templates: QueryList<any>;\n    \n    public templateMap: any;\n    \n    get horizontal(): boolean {\n        return this.layout == 'horizontal';\n    }\n    \n    ngAfterContentInit() {\n        if(this.templates.length) {\n            this.templateMap = {};\n        }\n        \n        this.templates.forEach((item) => {\n            this.templateMap[item.type] = item.template;\n        });\n    }\n         \n    onNodeClick(event: MouseEvent, node: TreeNode) {\n        let eventTarget = (<Element> event.target);\n        \n        if(eventTarget.className && eventTarget.className.indexOf('ui-tree-toggler') === 0) {\n            return;\n        }\n        else {\n            let metaKey = (event.metaKey||event.ctrlKey);\n            let index = this.findIndexInSelection(node);\n            let selected = (index >= 0);\n                   \n            if(selected && metaKey) {\n                if(this.isSingleSelectionMode()) {\n                    this.selectionChange.emit(null);\n                }\n                else {\n                    this.selection.splice(index,1);\n                    this.selectionChange.emit(this.selection);\n                }\n\n                this.onNodeUnselect.emit({originalEvent: event, node: node});\n            }\n            else {\n                if(this.isSingleSelectionMode()) {\n                    this.selectionChange.emit(node);\n                }\n                else if(this.isMultipleSelectionMode()) {\n                    this.selection = (!metaKey) ? [] : this.selection||[];\n                    this.selection.push(node);\n                    this.selectionChange.emit(this.selection);\n                }\n\n                this.onNodeSelect.emit({originalEvent: event, node: node});\n            }\n        }\n    }\n    \n    onNodeRightClick(event: MouseEvent, node: TreeNode) {\n        if(this.contextMenu) {\n            let eventTarget = (<Element> event.target);\n            \n            if(eventTarget.className && eventTarget.className.indexOf('ui-tree-toggler') === 0) {\n                return;\n            }\n            else {\n                let index = this.findIndexInSelection(node);\n                let selected = (index >= 0);\n                \n                if(!selected) {\n                    if(this.isSingleSelectionMode())\n                        this.selectionChange.emit(node);\n                    else\n                        this.selectionChange.emit([node]);\n                }\n                   \n                this.contextMenu.show(event);\n                this.onNodeContextMenuSelect.emit({originalEvent: event, node: node});\n            }\n        }\n    }\n    \n    findIndexInSelection(node: TreeNode) {\n        let index: number = -1;\n\n        if(this.selectionMode && this.selection) {\n            if(this.isSingleSelectionMode()) {\n                index = (this.selection == node) ? 0 : - 1;\n            }\n            else if(this.isMultipleSelectionMode()) {\n                for(let i = 0; i  < this.selection.length; i++) {\n                    if(this.selection[i] == node) {\n                        index = i;\n                        break;\n                    }\n                }\n            }\n        }\n\n        return index;\n    }\n    \n    isSelected(node: TreeNode) {\n        return this.findIndexInSelection(node) != -1;         \n    }\n    \n    isSingleSelectionMode() {\n        return this.selectionMode && this.selectionMode == 'single';\n    }\n    \n    isMultipleSelectionMode() {\n        return this.selectionMode && this.selectionMode == 'multiple';\n    }\n\n    expandToNode(node: TreeNode): void {\n        const pathToNode: TreeNode[] = this.findPathToNode(node);\n        if(pathToNode) {\n            pathToNode.forEach( node => node.expanded=true );\n        }\n    }\n\n    findPathToNode(node: TreeNode): TreeNode[] {\n        return Tree.findPathToNodeRecursive(node, this.value);\n    }\n\n    private static findPathToNodeRecursive(searchingFor: TreeNode, searchingIn: TreeNode[]): TreeNode[] {\n\n        if(!searchingIn || searchingIn.length == 0){\n            return undefined;\n        }\n\n        for(let i=0; i<searchingIn.length; i++){\n            if(searchingFor == searchingIn[i]){\n                return [ searchingIn[i] ];\n            }\n            const path: TreeNode[] = Tree.findPathToNodeRecursive( searchingFor, searchingIn[i].children );\n            if(path) {\n                path.unshift(searchingIn[i]);\n                return path;\n            }\n        }\n\n        return undefined;\n    }\n\n    getTemplateForNode(node: TreeNode): TemplateRef<any> {\n        if(this.templateMap)\n            return node.type ? this.templateMap[node.type] : this.templateMap['default'];\n        else\n            return null;\n    }\n}\n@NgModule({\n    imports: [CommonModule],\n    exports: [Tree,SharedModule],\n    declarations: [Tree,UITreeNode,TreeNodeTemplateLoader]\n})\nexport class TreeModule { }\n"]}